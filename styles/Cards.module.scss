@import './variables.scss';
@import './mixins.scss';

.listContainer {
  display: flex;
  flex-direction: column;
  text-transform: capitalize;
  margin-top: 0;
  margin-bottom: $space-2; /* was $space-3 */
  position: relative; // anchors nav buttons
  /* Do NOT set a non-auto z-index here to avoid creating a limiting stacking context */

  &.fiveAcross {
    width: 100%;
  }

  @include for-mobile-only {
    margin-top: 0;
  }

  &:hover {
    z-index: 1000;
  }

  .category {
    @include fluid-type(0.88rem, 1.6rem);
    margin-left: $space-7;
    padding: $space-1 0; /* was $space-2 */
    width: fit-content;
  }

  .scroller {
    position: relative;
    overflow-x: auto;
    overflow-y: visible;
    scroll-snap-type: x proximity;
    scroll-padding-left: $space-7;
    scroll-behavior: smooth;
    overscroll-behavior-x: contain;

    // hide scrollbar cross-browser
    scrollbar-width: none; // Firefox
    -ms-overflow-style: none; // IE/Edge Legacy
    &::-webkit-scrollbar { display: none; } // WebKit

    &.scrollerStatic {
      overflow: hidden; // no horizontal scroll when fixed five
    }
  }

  .cardRow {
    display: flex;
    flex-direction: row;
    padding: $space-2 $space-7 $space-4 $space-7; /* was $space-3 ... $space-6 */
    overflow: visible;
    margin-top: 0;
    margin-left: 0;
    gap: $space-2;
    cursor: grab;
    user-select: none;
    -webkit-user-select: none;

    &.cardRowFive {
      justify-content: space-between;
      cursor: default;
      user-select: auto;
      -webkit-user-select: auto;

      /* Enforce exact five-across sizing for all cards (including special cards) */
      > .card {
        width: calc((100% - (2 * #{$space-7}) - (4 * #{$space-2})) / 5);
        height: calc(((100% - (2 * #{$space-7}) - (4 * #{$space-2})) / 5) * 1.008); /* increased by 40% from 0.72 -> 1.008 */
      }
    }

    &::-webkit-scrollbar {
      display: none;
    }

    @include for-mobile-only {
      
      padding: $space-2 $space-3 $space-4 $space-3; /* tighter mobile padding */
    }
  }

  .navButton {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    z-index: 20;
    background: rgba(0,0,0,0.4);
    border: 1px solid rgba(255,255,255,0.4);
    border-radius: 9999px;
    padding: $space-2;
    color: #fff;
    cursor: pointer;
    pointer-events: auto;
  }
  .navLeft { left: $space-2; }
  .navRight { right: $space-2; }
}

.card {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: clamp(11rem, 17vw, 15rem); /* slightly smaller */
  height: clamp(9.5rem, 14.5vw, 11.5rem); /* slightly smaller */
  background: linear-gradient($card-color, $card-color) padding-box,
              linear-gradient(140deg, rgba($gold-500, 0.55), rgba($gold-600, 0.15)) border-box;
  border: 1px solid transparent;
  border-radius: $radius-s;
  margin-right: $space-1;
  transition: transform $dur-base $ease-out, box-shadow $dur-base $ease-out, background $dur-base $ease-out;
  z-index: 1;
  cursor: pointer;
  overflow: visible;
  scroll-snap-align: start;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
  position: relative;

  &:hover {
    transform: scale(1.08); /* slightly less growth */
    box-shadow: 0 8px 24px rgba(212, 175, 55, 0.25), $elev-2;
    z-index: 2000;

    &::after {
      opacity: 1;
    }

    .cardPoster {
      height: 50%;
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
    .cardInfo {
      box-shadow: 0 12px 28px rgba(212, 175, 55, 0.15), $elev-3;
      display: flex;
      flex-direction: column;
      height: fit-content;
    }
  }

  &::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(180deg, rgba(0,0,0,0) 40%, rgba(0,0,0,0.55) 100%);
    border-radius: inherit;
    opacity: 0;
    transition: opacity $dur-base $ease-out;
    pointer-events: none;
  }

  .cardPoster {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: $radius-s;
    user-drag: none;
    -webkit-user-drag: none;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
  }

  .cardInfo {
    min-height: fit-content;
    background-color: rgba(0,0,0,0.55);
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
    border-top: 1px solid rgba($gold-500, 0.35);
    border-bottom-left-radius: $radius-s;
    border-bottom-right-radius: $radius-s;
    display: none;
    padding: $space-2;
    font-size: inherit;
  }
}

/* Special CTA cards: match base card sizing and layout */
.specialCard {
  display: flex;
  align-items: center;
  justify-content: center;
  /* inherit base .card background/border to match design */
}

.specialContent {
  text-align: center;
  padding: 8px 10px;
}

.specialTitle { font-weight: 700; font-size: 1.05rem; }
.specialSubtitle { opacity: 0.85; font-size: 0.9rem; margin-top: 4px; }

.selected {
  outline: 2px solid $gold-500;
  box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.35);
}

.modalButton {
  display: flex;
  width: fit-content;
  height: fit-content;
  align-items: center;
}

.dot {
  color: $button-border;
  padding: 0 $space-1;
}

.longCard {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: clamp(12rem, 18vw, 16rem);
  height: clamp(20rem, 30vw, 26rem);
  background: linear-gradient($card-color, $card-color) padding-box,
              linear-gradient(140deg, rgba($gold-500, 0.55), rgba($gold-600, 0.15)) border-box;
  border: 1px solid transparent;
  border-radius: $radius-s;
  margin-right: $space-1;
  transition: transform $dur-base $ease-out, box-shadow $dur-base $ease-out, background $dur-base $ease-out;
  z-index: 1;
  cursor: pointer;
  overflow: visible;
  scroll-snap-align: start;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);
  position: relative;

  &:hover {
    transform: scale(1.1);
    box-shadow: $elev-2;
    z-index: 2000;

    .cardPoster {
      height: 50%;
      -webkit-mask-image: linear-gradient(to bottom, $secondary 70%, transparent 100%);
      mask-image: linear-gradient(to bottom, $secondary 70%, transparent 100%);
    }
    .more {
      display: flex;
      flex-direction: column;
    }
  }

  .cardPoster {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: $radius-s;
    user-drag: none;
    -webkit-user-drag: none;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
  }
}
.more {
  border-bottom-left-radius: $radius-s;
  border-bottom-right-radius: $radius-s;
  display: none;
  width: 100%;
  position: absolute;
  bottom: 0;
  padding: $space-2;
  z-index: 8;
}
.actionRow {
  display: flex;
  flex-direction: row;
  justify-content: space-between;
}

.row {
  display: flex;
  flex-direction: row;
  align-items: center;
  flex-wrap: wrap;
}

.textDetails {
  padding: $space-1 $space-1;
  font-size: 0.75rem;

  .greenText {
    color: $greenText;
    font-weight: bold;
    padding: $space-1;
    padding-left: 0;
  }

  .rating {
    border: $gold-500 solid 1px;
    padding: 0 $space-1;
    margin: 0 $space-1;
  }

  .regularText {
    font-weight: 400;
  }
}

.container {
  display: flex;
  flex-direction: row;
  align-items: center;
  margin-right: 2.5rem;
  margin-left: 0.5rem;
  overflow: visible;
  width: 11rem;
  margin-top: -3.2rem;
  margin-bottom: -3.2rem;

  .rank {
    font-size: 13rem;
    font-weight: 900;
    -webkit-text-stroke: 5px #7c7c7c;
    -webkit-text-fill-color: $black;
    margin-right: -2rem;
    margin-bottom: 1.4rem;
    padding: 0 !important;
    cursor: pointer;
  }
}

.featureCard {
  display: flex;
  flex-direction: column;
  flex-shrink: 0;
  width: clamp(6.5rem, 10vw, 8rem);
  height: clamp(9rem, 14vw, 11rem);
  background: linear-gradient($card-color, $card-color) padding-box,
              linear-gradient(140deg, rgba($gold-500, 0.55), rgba($gold-600, 0.15)) border-box;
  border: 1px solid transparent;
  border-top-right-radius: $radius-s;
  border-bottom-right-radius: $radius-s;
  margin-right: $space-2;
  transition: transform $dur-base $ease-out, box-shadow $dur-base $ease-out, background $dur-base $ease-out;
  z-index: 3;
  cursor: pointer;
  overflow: visible;
  scroll-snap-align: start;
  box-shadow: 0 2px 8px rgba(0,0,0,0.25);

  &:hover {
    transform: scale(1.1);
    border-radius: $radius-s;
    z-index: 2000;
    box-shadow: $elev-2;

    .poster {
      height: 50%;
      border-top-left-radius: $radius-s;
      border-bottom-right-radius: 0;
    }

    .info {
      display: flex;
      flex-direction: column;
      box-shadow: $elev-3;
      min-height: fit-content;
    }
  }

  .poster {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-top-right-radius: $radius-s;
    border-bottom-right-radius: $radius-s;
    user-drag: none;
    -webkit-user-drag: none;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
  }
}

.info {
  min-height: fit-content;
  background-color: rgba(0,0,0,0.55);
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  border-top: 1px solid rgba($gold-500, 0.35);
  border-bottom-left-radius: $radius-s;
  border-bottom-right-radius: $radius-s;
  display: none;
  padding: $space-2;
  font-size: inherit;
}
